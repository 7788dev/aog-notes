---
tags:
  - 入门
  - 配置
date: 2024-12-19
---

# 配置

AOG Notes 通过 `site.config.ts` 文件进行配置，所有设置集中管理。

## 基本配置

```typescript
const siteConfig = {
  name: '我的笔记',
  title: '我的笔记 | 知识管理',
  description: '个人技术笔记与知识分享',
  url: 'https://notes.example.com',
  version: 'v1.0.0',
}
```

## 主题配置

```typescript
const siteConfig = {
  themeColor: '#16b777',
  logo: {
    text: '我的笔记',
  },
}
```

### 推荐主题色

| 颜色 | 色值 | 风格 |
|------|------|------|
| 绿色 | #16b777 | 清新自然 |
| 蓝色 | #3b82f6 | 专业稳重 |
| 紫色 | #8b5cf6 | 优雅神秘 |
| 橙色 | #f97316 | 活力热情 |

## SEO 配置

```typescript
const siteConfig = {
  seo: {
    enabled: true,           // 是否启用 SEO
    keywords: ['笔记', '技术'],
    author: 'Your Name',
    robots: 'index, follow', // 搜索引擎爬取规则
    googleVerification: '',  // Google 站点验证
    baiduVerification: '',   // 百度站点验证
  },
}
```

设置 `seo.enabled: false` 可以完全关闭 SEO 功能，适合内部文档或私有笔记。

## 功能开关

```typescript
const siteConfig = {
  features: {
    search: true,          // 全文搜索
    favorites: true,       // 收藏功能
    darkMode: true,        // 深色模式
    toc: false,            // 目录导航（开发中）
    codeLineNumbers: false,// 代码行号
    articleNav: true,      // 上一篇/下一篇导航
    breadcrumb: true,      // 面包屑导航
    rss: true,             // RSS 订阅
    readingTime: true,     // 阅读时间估算
    tags: true,            // 标签系统
    pwa: true,             // PWA 离线支持
  },
}
```

## 评论系统

支持 Giscus、Utterances、Disqus 三种评论系统。

### Giscus（推荐）

基于 GitHub Discussions，需要先在 [giscus.app](https://giscus.app) 获取配置。

```typescript
const siteConfig = {
  comments: {
    enabled: true,
    provider: 'giscus',
    giscus: {
      repo: 'your-username/your-repo',
      repoId: 'R_xxxxx',
      category: 'Announcements',
      categoryId: 'DIC_xxxxx',
      mapping: 'pathname',  // 可选: 'pathname' | 'url' | 'title'
      theme: 'preferred_color_scheme',
    },
  },
}
```

### Utterances

基于 GitHub Issues。

```typescript
const siteConfig = {
  comments: {
    enabled: true,
    provider: 'utterances',
    utterances: {
      repo: 'your-username/your-repo',
      theme: 'github-light',
    },
  },
}
```

### Disqus

```typescript
const siteConfig = {
  comments: {
    enabled: true,
    provider: 'disqus',
    disqus: {
      shortname: 'your-disqus-shortname',
    },
  },
}
```

## 标签系统

在 Markdown 文件的 frontmatter 中添加标签：

```yaml
---
title: 我的文章
tags:
  - JavaScript
  - React
  - 前端
---
```

标签会显示在文章详情页，点击可以筛选相关文章。

## RSS 订阅

启用后自动生成 `/feed.xml`，读者可以通过 RSS 阅读器订阅更新。

## PWA 支持

启用后网站可以：
- 添加到手机主屏幕
- 离线访问已缓存的内容
- 获得类似原生应用的体验

需要在 `public` 目录放置图标文件：
- `icon-192.svg` 或 `icon-192.png`
- `icon-512.svg` 或 `icon-512.png`

## 自定义代码

支持注入自定义 CSS 和 JavaScript，适合添加统计代码或自定义样式。

```typescript
const siteConfig = {
  customCode: {
    // 插入到 <head> 中（如 Google Analytics）
    headScript: `
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXX"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XXXXXX');
      </script>
    `,
    
    // 插入到 </body> 前
    bodyScript: `
      <script src="https://example.com/custom.js"></script>
    `,
    
    // 自定义 CSS
    css: `
      .prose h2 { color: #16b777; }
      .custom-class { font-weight: bold; }
    `,
  },
}
```

## 页脚配置

```typescript
const siteConfig = {
  footer: {
    text: '© 2024 My Notes',
    links: [
      { name: 'GitHub', url: 'https://github.com/xxx' },
      { name: 'Twitter', url: 'https://twitter.com/xxx' },
    ],
    showPoweredBy: true,  // 显示 "Powered by AOG Notes"
  },
}
```

## URL 配置

自定义 URL 路径样式、后缀等。

```typescript
const siteConfig = {
  url_config: {
    // 路径样式
    // 'default': /notes/article (默认)
    // 'flat': /article (扁平化)
    // 'date': /2024/01/article (按日期)
    // 'category': /category/article (按分类)
    pathStyle: 'default',
    
    // 是否添加 .html 后缀
    trailingHtml: false,
    
    // 是否添加尾部斜杠
    trailingSlash: false,
    
    // 是否去除数字前缀 (01-快速开始 -> 快速开始)
    removeNumberPrefix: true,
    
    // 自定义路径前缀 (如 /docs)，Vercel 部署时使用
    basePath: '',
    
    // 是否转为小写
    lowercase: false,
    
    // 是否 slugify (空格转连字符)
    slugify: true,
  },
}
```

### URL 样式示例

| 配置 | 示例 URL |
|------|----------|
| 默认 | `/notes/jie-shao` |
| trailingHtml: true | `/notes/jie-shao.html` |
| trailingSlash: true | `/notes/jie-shao/` |
| basePath: 'docs' | `/docs/notes/jie-shao` |
| pathStyle: 'category' | `/kuai-su-kai-shi/jie-shao` |

## 部署配置

```typescript
const siteConfig = {
  deploy: {
    // GitHub Pages 部署时自动从仓库名获取 basePath
    // 例如仓库 username/my-notes 会自动设置 basePath 为 /my-notes
    // 设为 false 可禁用自动检测
    githubPagesAutoBasePath: true,
  },
}
```

### basePath 优先级

basePath 的确定优先级（从高到低）：

1. `NEXT_PUBLIC_BASE_PATH` 环境变量
2. GitHub Pages 自动检测（从 `GITHUB_REPOSITORY` 获取仓库名）
3. `site.config.ts` 中的 `url_config.basePath`

### 不同部署平台的配置

| 平台 | basePath 配置方式 |
|------|------------------|
| Vercel（根路径） | 无需配置 |
| Vercel（子路径） | `url_config.basePath: '/docs'` |
| GitHub Pages | 自动从仓库名获取，无需配置 |
| 其他静态托管 | 设置 `NEXT_PUBLIC_BASE_PATH` 环境变量 |

## 高级配置

```typescript
const siteConfig = {
  advanced: {
    locale: 'zh-CN',       // 语言
    dateFormat: 'YYYY-MM-DD',
    notesPerPage: 50,      // 每页笔记数
    wordsPerMinute: 200,   // 阅读速度（用于计算阅读时间）
  },
}
```

## 完整配置示例

```typescript
const siteConfig: SiteConfig = {
  name: 'Dev Notes',
  title: 'Dev Notes | 开发者笔记',
  description: '记录开发过程中的学习笔记',
  url: 'https://notes.dev',
  version: 'v2.0.0',

  logo: { text: 'Dev Notes' },
  themeColor: '#3b82f6',

  seo: {
    enabled: true,
    keywords: ['开发笔记', '编程学习'],
    author: 'Your Name',
  },

  features: {
    search: true,
    favorites: true,
    darkMode: true,
    toc: false,
    codeLineNumbers: false,
    articleNav: true,
    breadcrumb: true,
    rss: true,
    readingTime: true,
    tags: true,
    pwa: true,
  },

  dataDir: 'data',

  social: {
    github: 'https://github.com/your-username',
  },

  footer: {
    text: '© 2024 Dev Notes',
    showPoweredBy: false,
  },

  customCode: {
    css: `
      /* 自定义样式 */
    `,
  },

  url_config: {
    pathStyle: 'default',
    trailingHtml: false,
    removeNumberPrefix: true,
    slugify: true,
  },

  advanced: {
    locale: 'zh-CN',
  },
}
```
